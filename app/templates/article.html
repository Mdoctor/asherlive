{% extends "base.html" %}
{% import "_macros.html" as macros %}
{% block container %}

{% for post in posts %}
            <div class="panel panel-info">
                <div class="panel-body">
                    <div class="row">
                    <div class="col-md-6">
                    <h3 class="panel-title">{{ post.title }}</h3>
                    </div>
                    {% if current_user == post.author %}
                    <div class="col-md-2 col-md-offset-4 hidden-xs">
                        <a class="btn btn-sm btn-info" type="button" href="{{url_for('.edit',id=post.id)}}">编辑</a>
                        <a class="btn btn-sm btn-danger" type="button" href="{{url_for('.delete',id=post.id)}}">删除</a>
                    </div>
                    {% endif %}
                    </div>
                    <hr>
                    {% if post.body_html %}
                        {{ post.body_html|markdown2html|safe}}
                    {% else %}
                        {{ post.body|markdown2html|safe }}
                    {% endif %}
                </div>
            </div>
            <ul class="list-group">
                {% for comment in comments %}
                <li class="list-group-item list-group-item-danger">
                     {% if comment.body_html %}
                        {{ comment.body_html | safe }}
                    {% else %}
                        {{ comment.body }}
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
{% endfor %}
{% if pagination and pagination.pages > 1 %}
<nav class="col-md-4 col-md-offset-4">
    <nav aria-label="Page navigation">
        {{ macros.pagination_widget(pagination, 'main.post') }}
    </nav>
</nav>
{% endif %}
{% endblock %}